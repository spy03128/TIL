# let, const 키워드와 블록 레벨 스코프

## var 키워드로 선언한 변수의 문제점

ES5까지 변수를 선언할 수 있는 유일한 방법은 `var` 키워드를 사용하는 것이었음

`var` 키워드로 선언된 변수는 다른 언어와는 구별되는 독특한 특징이 있으며 주의를 기울이지 않으면 심각한 문제를 발생시킬 수 있음

### 1. 변수 중복 선언 허용

`var` 키워드로 선언한 변수는 중복 선언이 가능함

```jsx
var x = 1;
var y = 1;

var x = 100; //초기화문이 있는 변수는 var 키워드가 없는 것처럼 동작함
var y; //초기화문이 없는 변수 선언문은 무시됨

console.log(x); //100
console.log(y); //1
```

초기화문이 있는 변수 선언문은 자바스크립트 엔진에 의해 `var` 키워드가 없는 것처럼 동작하고 초기화문이 없는 변수 선언문은 무시되며 이때 에러는 발생하지 않음

### 2. 함수 레벨 스코프

`var` 키워드로 선언한 변수는 오로지 함수의 코드 블록만을 지역 스코프로 인정함. 따라서 함수 외부에서 `var` 키워드로 선언한 변수는 코드 블록 내에서 선언해도 모두 전역 변수가 됨

```jsx
var x = 1;

if (true) {
  var x = 10;
}

console.log(x); //10
```

for문의 변수 선언문에서 `var` 키워드로 선언한 변수도 전역변수가 됨

```jsx
var i = 10;

for (var i = 0; i < 5; i++) {
  console.log(i); // 0 1 2 3 4
}

console.log(i); //5
```

### 3. 변수 호이스팅

`var` 키워드로 변수를 선언하면 변수 호이스팅에 의해 변수 선언문이 스코프의 선두로 끌어 올려진 것처럼 동작함

즉, 변수 호이스팅에 의해 `var` 키워드로 선언한 변수는 변수 선언문 이전에 참조할 수 있음

단 할당문 이전에 변수를 참조하면 언제나 `undefined` 를 반환함

```jsx
//이 시점에는 변수 호이스팅에 의해 이미 foo 변수가 선언됨
//변수 foosms undefined로 초기화됨
console.log(foo); //undefined

//변수에 값을 할당
foo = 123;

console.log(foo); //123

//변수 선언은 런타임 이전에 자바스크립트 엔진에 의해 암묵적으로 실행됨
var foo;
```
